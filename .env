# Docker Compose Environment Configuration for Skewed Emacs + Gendl
# Copy this file to .env and customize as needed
#
# Usage: cp .env.example .env && edit .env

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================

# Projects directory (mounted into both containers)
PROJECTS_DIR=${HOME}/projects

# Docker network name (shared between containers)
DOCKER_NETWORK_NAME=skewed-emacs-network

# Host user configuration (for file permissions)
HOST_USER_UID=1000

# =============================================================================
# EMACS CONTAINER CONFIGURATION  
# =============================================================================

# Image and container naming
EMACS_IMAGE_TAG=devo  # or master or release--1598
EMACS_CONTAINER_NAME=skewed-emacs

# HTTP API Configuration
EMACS_HTTP_PORT=7080          # Internal container port
EMACS_HTTP_HOST_PORT=7081     # External host port (offset to avoid conflicts)

# Service toggles
EMACS_START_HTTP=true

# port used for client SLIME connection
EMACS_SWANK_PORT=4200 


# =============================================================================
# GENDL CONTAINER CONFIGURATION
# =============================================================================

# Image and container naming
GENDL_IMAGE_TAG=devo-ccl      # Options: devo-ccl, devo-sbcl, master-ccl, master-sbcl
GENDL_CONTAINER_NAME=gendl-ccl

# HTTP API Configuration  
GENDL_HTTP_PORT=9080          # Internal container port
GENDL_HTTP_HOST_PORT=9081     # External host port

# SWANK Configuration (for SLIME connections)
GENDL_SWANK_PORT=4200         # Internal container port
GENDL_SWANK_HOST_PORT=4201    # External host port

# HTTPS Configuration (optional)
GENDL_HTTPS_PORT=9443         # Internal container port  
GENDL_HTTPS_HOST_PORT=9444    # External host port

# TELNET Configuration (optional)
GENDL_TELNET_PORT=4023        # Internal container port
GENDL_TELNET_HOST_PORT=4024   # External host port

# Service toggles
GENDL_START_HTTP=true         # Enable HTTP API
GENDL_START_HTTPS=false       # Enable HTTPS API  
GENDL_START_SWANK=true        # Enable SWANK for SLIME connections
GENDL_START_TELNET=false      # Enable TELNET REPL

# Gendl operation mode
GENDL_MODE=default            # Options: default (Lisp stdio), mcp (JSON MCP stdio)

#
# Authentication File mountings
#
CLAUDE_AUTH_DIR=/home/dcooper8/.claude



# =============================================================================
# DEVELOPMENT NOTES
# =============================================================================

# Port Layout (default configuration):
#   7081 -> 7080  : Emacs HTTP API  
#   9081 -> 9080  : Gendl HTTP API
#   4201 -> 4200  : Gendl SWANK (for SLIME connections)
#   9444 -> 9443  : Gendl HTTPS API (if enabled)
#   4024 -> 4023  : Gendl TELNET REPL (if enabled)

# Container Networking:
#   - Containers can reach each other by hostname:
#     - emacs-backend (Emacs container)
#     - gendl-backend (Gendl container)
#   - From Emacs container: M-x slime-connect RET gendl-backend RET 4200 RET
#   - From host: M-x slime-connect RET localhost RET 4201 RET

# Volume Mounts:
#   - Emacs: ${PROJECTS_DIR} -> /projects  
#   - Gendl: ${PROJECTS_DIR} -> /home/gendl-user/projects
#   - Both containers share the same host directory for seamless file access

# Docker socket group ID (dynamically detected by compose-dev)
DOCKER_GROUP_ID=989
